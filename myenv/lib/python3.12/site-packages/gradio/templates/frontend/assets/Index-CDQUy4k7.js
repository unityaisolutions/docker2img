import"./index-DWyrxSSh.js";import{C as he}from"./Index-CZ7kJTrZ.js";import{BaseMarkdown as be}from"./Index-Cj9TnrTB.js";import"./svelte/svelte.js";import"./init-DceG2-17.js";import"./FullscreenButton-CW4A332Q.js";import"./MarkdownCode-D98obK66.js";import"./prism-python-Ci-d-0sf.js";import"./StreamingBar-Bjeje9_o.js";import"./Example-Do2HGpgf.js";import"./Example-DWF2EcDk.js";const{SvelteComponent:ve,add_flush_callback:ke,append:_,attr:h,bind:ge,binding_callbacks:Y,check_outros:ce,create_component:de,destroy_component:fe,destroy_each:we,detach:M,element:k,ensure_array_like:x,flush:ee,group_outros:_e,init:ye,insert:z,listen:S,mount_component:me,run_all:je,safe_not_equal:Ee,set_data:pe,set_input_value:te,set_style:ne,space:P,text:U,toggle_class:T,transition_in:I,transition_out:q}=window.__gradio__svelte__internal,{onMount:Ce,tick:Q}=window.__gradio__svelte__internal;function oe(o,e,t){const l=o.slice();return l[28]=e[t],l[30]=t,l}function le(o){let e,t,l=o[6].lines_added>0&&se(o),s=o[6].lines_removed>0&&ie(o);return{c(){e=k("span"),l&&l.c(),t=P(),s&&s.c(),h(e,"class","diff-stats svelte-tkeujr")},m(n,a){z(n,e,a),l&&l.m(e,null),_(e,t),s&&s.m(e,null)},p(n,a){n[6].lines_added>0?l?l.p(n,a):(l=se(n),l.c(),l.m(e,t)):l&&(l.d(1),l=null),n[6].lines_removed>0?s?s.p(n,a):(s=ie(n),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(n){n&&M(e),l&&l.d(),s&&s.d()}}}function se(o){let e,t,l=o[6].lines_added+"",s;return{c(){e=k("span"),t=U("+"),s=U(l),h(e,"class","added svelte-tkeujr")},m(n,a){z(n,e,a),_(e,t),_(e,s)},p(n,a){a&64&&l!==(l=n[6].lines_added+"")&&pe(s,l)},d(n){n&&M(e)}}}function ie(o){let e,t,l=o[6].lines_removed+"",s;return{c(){e=k("span"),t=U("-"),s=U(l),h(e,"class","removed svelte-tkeujr")},m(n,a){z(n,e,a),_(e,t),_(e,s)},p(n,a){a&64&&l!==(l=n[6].lines_removed+"")&&pe(s,l)},d(n){n&&M(e)}}}function Be(o){let e,t,l,s,n,a,r,i,f;function c(b){o[19](b)}let m={language:"python",lines:10,dark_mode:!1,basic:!0,readonly:!1,placeholder:"Enter your code here...",wrap_lines:!0};o[5]!==void 0&&(m.value=o[5]),l=new he({props:m}),Y.push(()=>ge(l,"value",c));function d(b,E){return b[1]?We:ze}let w=d(o),v=w(o);return{c(){e=k("div"),t=k("div"),de(l.$$.fragment),n=P(),a=k("button"),v.c(),h(t,"class","code-editor-container svelte-tkeujr"),h(a,"class","update-code-button svelte-tkeujr"),T(a,"updating",o[1]),h(e,"class","code-content svelte-tkeujr")},m(b,E){z(b,e,E),_(e,t),me(l,t,null),_(e,n),_(e,a),v.m(a,null),r=!0,i||(f=S(a,"click",o[12]),i=!0)},p(b,E){const y={};!s&&E&32&&(s=!0,y.value=b[5],ke(()=>s=!1)),l.$set(y),w!==(w=d(b))&&(v.d(1),v=w(b),v&&(v.c(),v.m(a,null))),(!r||E&2)&&T(a,"updating",b[1])},i(b){r||(I(l.$$.fragment,b),r=!0)},o(b){q(l.$$.fragment,b),r=!1},d(b){b&&M(e),fe(l),v.d(),i=!1,f()}}}function Me(o){let e,t,l,s=x(o[7]),n=[];for(let i=0;i<s.length;i+=1)n[i]=ae(oe(o,s,i));const a=i=>q(n[i],1,1,()=>{n[i]=null});let r=o[7].length===0&&ue();return{c(){e=k("div");for(let i=0;i<n.length;i+=1)n[i].c();t=P(),r&&r.c(),h(e,"class","message-history svelte-tkeujr")},m(i,f){z(i,e,f);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);_(e,t),r&&r.m(e,null),o[18](e),l=!0},p(i,f){if(f&1152){s=x(i[7]);let c;for(c=0;c<s.length;c+=1){const m=oe(i,s,c);n[c]?(n[c].p(m,f),I(n[c],1)):(n[c]=ae(m),n[c].c(),I(n[c],1),n[c].m(e,t))}for(_e(),c=s.length;c<n.length;c+=1)a(c);ce()}i[7].length===0?r||(r=ue(),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(i){if(!l){for(let f=0;f<s.length;f+=1)I(n[f]);l=!0}},o(i){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)q(n[f]);l=!1},d(i){i&&M(e),we(n,i),r&&r.d(),o[18](null)}}}function ze(o){let e;return{c(){e=U("Update Code")},m(t,l){z(t,e,l)},d(t){t&&M(e)}}}function We(o){let e;return{c(){e=U("Updated!")},m(t,l){z(t,e,l)},d(t){t&&M(e)}}}function re(o){let e,t,l;function s(){return o[17](o[28],o[30])}return{c(){e=k("button"),e.textContent="Undo",h(e,"class","undo-button svelte-tkeujr"),h(e,"title","Undo this change")},m(n,a){z(n,e,a),t||(l=S(e,"click",s),t=!0)},p(n,a){o=n},d(n){n&&M(e),t=!1,l()}}}function ae(o){let e,t,l,s,n,a;s=new be({props:{value:o[28].text,latex_delimiters:[],theme_mode:"system"}});let r=!o[28].isBot&&o[28].hash&&!o[28].isPending&&re(o);return{c(){e=k("div"),t=k("div"),l=k("span"),de(s.$$.fragment),n=P(),r&&r.c(),h(l,"class","message-text svelte-tkeujr"),h(t,"class","message-content svelte-tkeujr"),h(e,"class","message-item svelte-tkeujr"),T(e,"bot-message",o[28].isBot),T(e,"user-message",!o[28].isBot)},m(i,f){z(i,e,f),_(e,t),_(t,l),me(s,l,null),_(t,n),r&&r.m(t,null),a=!0},p(i,f){const c={};f&128&&(c.value=i[28].text),s.$set(c),!i[28].isBot&&i[28].hash&&!i[28].isPending?r?r.p(i,f):(r=re(i),r.c(),r.m(t,null)):r&&(r.d(1),r=null),(!a||f&128)&&T(e,"bot-message",i[28].isBot),(!a||f&128)&&T(e,"user-message",!i[28].isBot)},i(i){a||(I(s.$$.fragment,i),a=!0)},o(i){q(s.$$.fragment,i),a=!1},d(i){i&&M(e),fe(s),r&&r.d()}}}function ue(o){let e;return{c(){e=k("div"),e.textContent="No messages yet",h(e,"class","no-messages svelte-tkeujr")},m(t,l){z(t,e,l)},d(t){t&&M(e)}}}function Le(o){let e,t,l,s,n,a,r,i,f,c,m,d,w,v,b,E,y,H,C,K,R,W,G,N,g=o[6]&&(o[6].lines_added>0||o[6].lines_removed>0)&&le(o);const V=[Me,Be],L=[];function X(p,j){return p[0]==="chat"?0:p[0]==="code"?1:-1}return~(m=X(o))&&(d=L[m]=V[m](o)),{c(){e=k("div"),t=k("button"),l=P(),s=k("div"),n=k("button"),n.textContent="Chat",a=P(),r=k("button"),i=U(`Code
			`),g&&g.c(),f=P(),c=k("div"),d&&d.c(),w=P(),v=k("div"),b=k("div"),b.innerHTML="Powered by: <code>gpt-oss</code>",E=P(),y=k("textarea"),H=P(),C=k("button"),K=U("Send"),h(t,"class","resize-handle svelte-tkeujr"),h(t,"aria-label","Resize sidebar"),h(n,"class","tab-button svelte-tkeujr"),T(n,"active",o[0]==="chat"),h(r,"class","tab-button svelte-tkeujr"),T(r,"active",o[0]==="code"),h(s,"class","tab-header svelte-tkeujr"),h(c,"class","tab-content svelte-tkeujr"),h(b,"class","powered-by svelte-tkeujr"),h(y,"placeholder","What can I add or change?"),h(y,"class","prompt-input svelte-tkeujr"),h(C,"class","submit-button svelte-tkeujr"),C.disabled=R=o[2].trim()==="",h(v,"class","input-section svelte-tkeujr"),h(e,"class","vibe-editor svelte-tkeujr"),ne(e,"width",o[3]+"px")},m(p,j){z(p,e,j),_(e,t),_(e,l),_(e,s),_(s,n),_(s,a),_(s,r),_(r,i),g&&g.m(r,null),_(e,f),_(e,c),~m&&L[m].m(c,null),_(e,w),_(e,v),_(v,b),_(v,E),_(v,y),te(y,o[2]),_(v,H),_(v,C),_(C,K),o[22](e),W=!0,G||(N=[S(t,"mousedown",o[11]),S(n,"click",o[15]),S(r,"click",o[16]),S(y,"keydown",o[20]),S(y,"input",o[21]),S(C,"click",o[9])],G=!0)},p(p,[j]){(!W||j&1)&&T(n,"active",p[0]==="chat"),p[6]&&(p[6].lines_added>0||p[6].lines_removed>0)?g?g.p(p,j):(g=le(p),g.c(),g.m(r,null)):g&&(g.d(1),g=null),(!W||j&1)&&T(r,"active",p[0]==="code");let u=m;m=X(p),m===u?~m&&L[m].p(p,j):(d&&(_e(),q(L[u],1,1,()=>{L[u]=null}),ce()),~m?(d=L[m],d?d.p(p,j):(d=L[m]=V[m](p),d.c()),I(d,1),d.m(c,null)):d=null),j&4&&te(y,p[2]),(!W||j&4&&R!==(R=p[2].trim()===""))&&(C.disabled=R),(!W||j&8)&&ne(e,"width",p[3]+"px")},i(p){W||(I(d),W=!0)},o(p){q(d),W=!1},d(p){p&&M(e),g&&g.d(),~m&&L[m].d(),o[22](null),G=!1,je(N)}}}function Pe(o,e,t){let{app:l}=e,{root:s}=e,n="",a=350,r=!1,i,f="chat",c="",m=null,d=[],w;const v=(u="smooth")=>{w&&w.scrollTo({top:w.scrollHeight,behavior:u})},b=async()=>{if(n.trim()==="")return;t(6,m=null);const u=d.length;t(7,d=[...d,{text:n,isBot:!1}]);const B=d.length;t(7,d=[...d,{text:"Working...",isBot:!0,isPending:!0}]),await Q(),v();const D=n;t(2,n=""),l.post_data(`${s}/gradio_api/vibe-edit/`,{prompt:D}).then(async([$,A])=>{if(A!==200)throw new Error(`Error: ${A}`);const F=$;t(6,m=F.diff_stats),t(7,d=d.map((J,O)=>(console.log(O,u,F.hash),O===u?{...J,hash:F.hash}:J))),t(7,d=d.map((J,O)=>O===B?{text:F.reasoning?F.reasoning:"Done.",isBot:!0,isPending:!1}:J)),await Q(),v()}).catch(async $=>{t(7,d=d.map((A,F)=>F===B?{text:"Error occurred.",isBot:!0,isPending:!1}:A)),await Q(),v()})},E=async(u,B)=>{try{await l.post_data(`${s}/gradio_api/undo-vibe-edit/`,{hash:u}),t(6,m=null);const D=d[B];t(2,n=D.text),t(7,d=d.slice(0,B))}catch(D){console.error("Failed to undo:",D)}},y=u=>{u.preventDefault(),r=!0,document.addEventListener("mousemove",H),document.addEventListener("mouseup",C),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},H=u=>{if(!r)return;const B=250,D=Math.min(800,window.innerWidth*.5),Z=window.innerWidth-u.clientX;t(3,a=Math.max(B,Math.min(D,Z))),window.dispatchEvent(new CustomEvent("vibeEditorResize",{detail:{width:a}}))},C=()=>{r=!1,document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",C),document.body.style.cursor="",document.body.style.userSelect=""},K=async()=>{try{const u=await fetch(`${s}/gradio_api/vibe-code/`,{method:"GET",headers:{"Content-Type":"application/json"}});if(u.ok){const B=await u.json();t(5,c=B.code)}}catch(u){console.error("Failed to fetch code:",u)}};let R=!1;const W=async()=>{try{await l.post_data(`${s}/gradio_api/vibe-code/`,{code:c}),t(1,R=!0),setTimeout(()=>{t(1,R=!1)},1e3)}catch(u){console.error("Failed to update code:",u)}};Ce(()=>()=>{document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",C)});const G=()=>t(0,f="chat"),N=()=>t(0,f="code"),g=(u,B)=>E(u.hash||"",B);function V(u){Y[u?"unshift":"push"](()=>{w=u,t(8,w)})}function L(u){c=u,t(5,c)}const X=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),b())};function p(){n=this.value,t(2,n)}function j(u){Y[u?"unshift":"push"](()=>{i=u,t(4,i)})}return o.$$set=u=>{"app"in u&&t(13,l=u.app),"root"in u&&t(14,s=u.root)},o.$$.update=()=>{o.$$.dirty&8192&&K(),o.$$.dirty&1&&f==="chat"&&Q().then(()=>v("auto")),o.$$.dirty&2},[f,R,n,a,i,c,m,d,w,b,E,y,W,l,s,G,N,g,V,L,X,p,j]}class Ne extends ve{constructor(e){super(),ye(this,e,Pe,Le,Ee,{app:13,root:14})}get app(){return this.$$.ctx[13]}set app(e){this.$$set({app:e}),ee()}get root(){return this.$$.ctx[14]}set root(e){this.$$set({root:e}),ee()}}export{Ne as default};
//# sourceMappingURL=Index-CDQUy4k7.js.map
